$USER tÃªn ngÆ°á»i sá»­ dá»¥ng hiá»‡n táº¡i
echo in ra mÃ n hÃ¬nh
read Ä‘á»c tá»« bÃ n phÃ­m
$HOME/$home thÆ° má»¥c chÃ­nh cá»§a ngÆ°á»i dÃ¹ng hiá»‡n táº¡i
$dir
$path
echo -e :tÃ¹y chá»n -e cho phÃ©p chÃ¨n cÃ¡c kÃ½ tá»±, nhÆ° \n cho dÃ²ng má»›i hoáº·c \t cho cÃ¡c tab.

find / -type f -size +1G , find . -size +1G 
du -h * | grep -v "^\s*$" | sort -n | head -n 10
-> lá»c file lá»›n hÆ¡n 1GB


find -atime -1 -type fclear -> lá»c file truy cáº­p tá»« 1 ngÃ y trÆ°á»›c 
find . -mtime +7 -> tÃ¬m táº¥t cáº£ cÃ¡c file Ä‘Ã£ khÃ´ng truy cáº­p tá»« 1 tuáº§n trÆ°á»›c

scp remote_username@127.0.0.1:/remote/pavietnam.tar.gz /local/directory -> copy file tá»« mÃ¡y remote
scp -i d-key-PRD-0001.PEM user@server:/sourcefile /desfile -> copy
scp -i d-key-PRD-0001.PEM /sourcefile user@server:/desfile -> Ä‘áº©y

- Kiá»ƒm tra Ä‘á»‹nh dáº¡ng cá»§a sda3:
df -hT

- Sá»­ dá»¥ng lá»‡nh df -h Ä‘á»ƒ xÃ¡c Ä‘á»‹nh kÃ­ch thÆ°á»›c hiá»‡n táº¡i cá»§a sda3:
df -h

- Sá»­ dá»¥ng lá»‡nh fdisk /dev/sda Ä‘á»ƒ má»Ÿ rá»™ng kÃ­ch thÆ°á»›c cá»§a sda:
sudo fdisk /dev/sda
Nháº¥n p Ä‘á»ƒ liá»‡t kÃª cÃ¡c phÃ¢n vÃ¹ng hiá»‡n cÃ³.
Nháº¥n d Ä‘á»ƒ xÃ³a phÃ¢n vÃ¹ng sda3.
Nháº¥n n Ä‘á»ƒ táº¡o phÃ¢n vÃ¹ng má»›i.
Nháº­p p Ä‘á»ƒ táº¡o phÃ¢n vÃ¹ng chÃ­nh.
Nháº­p kÃ­ch thÆ°á»›c phÃ¢n vÃ¹ng má»›i. 
Sá»­ dá»¥ng lá»‡nh resize2fs /dev/sda3 Ä‘á»ƒ tÄƒng kÃ­ch thÆ°á»›c cá»§a sda3:
sudo resize2fs /dev/sda3

- láº¥y trÆ°á»ng thá»© 2 tá»« dá»¯ liá»‡u truyá»n vÃ o báº±ng lá»‡nh 
ls -l | awk -F ' ' '{print $5 " "}'

echo ${hostname:4:1}

stop chronyd: sudo systemctl stop chronyd
change time: sudo date -s "YYYY-MM-DD HH:MM:SS"


- táº¡o má»™t tá»‡p cÃ³ tÃªn myfile vá»›i dung lÆ°á»£ng 100MB:
dd if=/dev/zero of=myfile bs=1M count=100

- SSH Tunneling
ssh -L 4000:10.103.1.19:3389 -i AP_windows_server.pem ubuntu@18.183.252.6

check ram: while true ; do echo $(date) >> /tmp/ram_log ; free |& tee -a /tmp/ram_log; sleep 1; done;
check cpu: watch -n 1 "mpstat -P ALL |$ tee -a /tmp/ddos_log"

dos2unix

# 1. Entry: Minute when the process will be started [0-60]
# 2. Entry: Hour when the process will be started [0-23]
# 3. Entry: Day of the month when the process will be started [1-28/29/30/31]
# 4. Entry: Month of the year when the process will be started [1-12]
# 5. Entry: Weekday when the process will be started [0-6] [0 is Sunday]


CÃ¡ch Kiá»ƒm Tra CÃ¡c ThÆ° Viá»‡n (Lib) ÄÃ£ CÃ i Äáº·t Trong Linux
dpkg -l
dpkg -s <tÃªn_gÃ³i>
apt list --installed
rpm -qa

giáº£i nÃ©n file:
tar -zxvf <tÃªn_tá»‡p_tar.gz>

nÃ©n file
tar -czvf <tÃªn_file_nÃ©n.tar.gz> <cÃ¡c_file_hoáº·c_thÆ°_má»¥c>

CÃ¡ch kiá»ƒm tra sá»‘ lÆ°á»£ng phiÃªn SSH Ä‘ang káº¿t ná»‘i Ä‘áº¿n mÃ¡y Linux
Äá»ƒ kiá»ƒm tra sá»‘ lÆ°á»£ng phiÃªn SSH Ä‘ang káº¿t ná»‘i Ä‘áº¿n mÃ¡y Linux, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng má»™t sá»‘ lá»‡nh sau:

1. Lá»‡nh w:
CÃ´ng dá»¥ng: Hiá»ƒn thá»‹ thÃ´ng tin vá» cÃ¡c ngÆ°á»i dÃ¹ng Ä‘ang Ä‘Äƒng nháº­p vÃ  tiáº¿n trÃ¬nh há» Ä‘ang cháº¡y.
CÃ¡ch sá»­ dá»¥ng:

w

Káº¿t quáº£: Lá»‡nh nÃ y sáº½ hiá»ƒn thá»‹ má»™t báº£ng thÃ´ng tin, bao gá»“m tÃªn ngÆ°á»i dÃ¹ng, terminal, thá»i gian Ä‘Äƒng nháº­p, thá»i gian khÃ´ng hoáº¡t Ä‘á»™ng vÃ  lá»‡nh Ä‘ang cháº¡y. Báº¡n cÃ³ thá»ƒ Ä‘áº¿m sá»‘ dÃ²ng trong pháº§n nÃ y Ä‘á»ƒ biáº¿t sá»‘ lÆ°á»£ng phiÃªn SSH.
2. Lá»‡nh who:
CÃ´ng dá»¥ng: Hiá»ƒn thá»‹ danh sÃ¡ch cÃ¡c ngÆ°á»i dÃ¹ng Ä‘ang Ä‘Äƒng nháº­p vÃ o há»‡ thá»‘ng.
CÃ¡ch sá»­ dá»¥ng:

who


Káº¿t quáº£: Lá»‡nh nÃ y sáº½ liá»‡t kÃª tÃªn ngÆ°á»i dÃ¹ng, terminal vÃ  thá»i gian Ä‘Äƒng nháº­p.
3. Lá»‡nh ps aux | grep sshd:
CÃ´ng dá»¥ng: Liá»‡t kÃª táº¥t cáº£ cÃ¡c tiáº¿n trÃ¬nh Ä‘ang cháº¡y vÃ  lá»c ra cÃ¡c tiáº¿n trÃ¬nh liÃªn quan Ä‘áº¿n SSH.
CÃ¡ch sá»­ dá»¥ng:

ps aux | grep sshd

Káº¿t quáº£: Lá»‡nh nÃ y sáº½ hiá»ƒn thá»‹ danh sÃ¡ch cÃ¡c tiáº¿n trÃ¬nh cÃ³ chá»©a tá»« khÃ³a "sshd". Má»—i dÃ²ng Ä‘áº¡i diá»‡n cho má»™t phiÃªn SSH.
4. Lá»‡nh netstat -antp | grep :22:
CÃ´ng dá»¥ng: Hiá»ƒn thá»‹ cÃ¡c káº¿t ná»‘i máº¡ng Ä‘ang má»Ÿ, bao gá»“m cáº£ cÃ¡c káº¿t ná»‘i SSH.
CÃ¡ch sá»­ dá»¥ng:

netstat -antp | grep :22


Káº¿t quáº£: Lá»‡nh nÃ y sáº½ liá»‡t kÃª cÃ¡c káº¿t ná»‘i Ä‘ang nghe trÃªn cá»•ng 22 (cá»•ng máº·c Ä‘á»‹nh cá»§a SSH). Má»—i dÃ²ng Ä‘áº¡i diá»‡n cho má»™t káº¿t ná»‘i SSH.
Lá»±a chá»n lá»‡nh phÃ¹ há»£p:
w vÃ  who cung cáº¥p thÃ´ng tin tá»•ng quan vá» cÃ¡c ngÆ°á»i dÃ¹ng Ä‘ang Ä‘Äƒng nháº­p.
ps aux | grep sshd cung cáº¥p thÃ´ng tin chi tiáº¿t hÆ¡n vá» cÃ¡c tiáº¿n trÃ¬nh SSH.
netstat -antp | grep :22 táº­p trung vÃ o cÃ¡c káº¿t ná»‘i máº¡ng trÃªn cá»•ng SSH.
LÆ°u Ã½:

Sá»‘ lÆ°á»£ng phiÃªn: Äá»ƒ Ä‘áº¿m chÃ­nh xÃ¡c sá»‘ lÆ°á»£ng phiÃªn, báº¡n cÃ³ thá»ƒ káº¿t há»£p cÃ¡c lá»‡nh trÃªn vá»›i lá»‡nh wc -l (Ä‘áº¿m sá»‘ dÃ²ng). VÃ­ dá»¥: ps aux | grep sshd | wc -l.
CÃ¡c tÃ¹y chá»n khÃ¡c: CÃ¡c lá»‡nh trÃªn cÃ³ nhiá»u tÃ¹y chá»n khÃ¡c Ä‘á»ƒ lá»c vÃ  Ä‘á»‹nh dáº¡ng káº¿t quáº£. Tham kháº£o tÃ i liá»‡u cá»§a tá»«ng lá»‡nh Ä‘á»ƒ biáº¿t thÃªm chi tiáº¿t.
VÃ­ dá»¥:
Äá»ƒ kiá»ƒm tra sá»‘ lÆ°á»£ng phiÃªn SSH Ä‘ang káº¿t ná»‘i vÃ  hiá»ƒn thá»‹ thÃ´ng tin chi tiáº¿t vá» cÃ¡c phiÃªn Ä‘Ã³, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng lá»‡nh:


ps aux | grep sshd


Káº¿t quáº£ cÃ³ thá»ƒ giá»‘ng nhÆ° sau:

user1     2345  0.0  0.0 11244  1284 pts/0    S+   11:34   0:00 sshd: user1@pts/0
user2     3456  0.1  0.2 15360  2560 pts/1    S+   12:00   0:01 sshd: user2@pts/1
Giáº£i thÃ­ch:

user1 vÃ  user2: TÃªn ngÆ°á»i dÃ¹ng.
2345 vÃ  3456: PID cá»§a tiáº¿n trÃ¬nh.
pts/0 vÃ  pts/1: Terminal mÃ  ngÆ°á»i dÃ¹ng káº¿t ná»‘i.
11:34 vÃ  12:00: Thá»i gian báº¯t Ä‘áº§u phiÃªn.
CÃ¡c lá»‡nh khÃ¡c cÃ³ thá»ƒ há»¯u Ã­ch:

last: Hiá»ƒn thá»‹ lá»‹ch sá»­ Ä‘Äƒng nháº­p cá»§a cÃ¡c ngÆ°á»i dÃ¹ng.
whois: Hiá»ƒn thá»‹ thÃ´ng tin vá» má»™t tÃªn miá»n hoáº·c Ä‘á»‹a chá»‰ IP.
ChÃº Ã½: Viá»‡c kiá»ƒm tra vÃ  quáº£n lÃ½ cÃ¡c phiÃªn SSH lÃ  ráº¥t quan trá»ng Ä‘á»ƒ Ä‘áº£m báº£o báº£o máº­t cho há»‡ thá»‘ng cá»§a báº¡n. Báº¡n nÃªn thÆ°á»ng xuyÃªn kiá»ƒm tra vÃ  cáº¥u hÃ¬nh cÃ¡c dá»‹ch vá»¥ SSH Ä‘á»ƒ ngÄƒn cháº·n cÃ¡c cuá»™c táº¥n cÃ´ng tá»« bÃªn ngoÃ i.

â˜… tiáº¿n trÃ¬nh trong linux:
https://www.geeksforgeeks.org/pstree-command-in-linux-with-examples/ 

tÃ¬m kÃ½ tá»± abc á»Ÿ cÃ¡c file táº¡i Ä‘Æ°á»ng dáº«n /home
find /home -type f -exec grep -Hn "abc" {} \; 
grep "abc" *.*

TÃ¬m file trong mÃ¡y:
find / -name "*.ycc"
find . -name "abc"

CÃ¡c phÃ­m táº¯t cÆ¡ báº£n trong lá»‡nh vi cá»§a Linux
Hiá»ƒu vá» cÃ¡c cháº¿ Ä‘á»™ cá»§a vi
Vi hoáº¡t Ä‘á»™ng dá»±a trÃªn cÃ¡c cháº¿ Ä‘á»™ khÃ¡c nhau. Hai cháº¿ Ä‘á»™ chÃ­nh lÃ :
	Cháº¿ Ä‘á»™ lá»‡nh (command mode): ÄÃ¢y lÃ  cháº¿ Ä‘á»™ máº·c Ä‘á»‹nh khi báº¡n má»Ÿ vi. Trong cháº¿ Ä‘á»™ nÃ y, cÃ¡c phÃ­m báº¡n gÃµ sáº½ Ä‘Æ°á»£c hiá»ƒu lÃ  cÃ¡c lá»‡nh Ä‘á»ƒ Ä‘iá»u khiá»ƒn vi, chá»© khÃ´ng pháº£i Ä‘á»ƒ nháº­p vÄƒn báº£n.
	Cháº¿ Ä‘á»™ chÃ¨n (insert mode): Trong cháº¿ Ä‘á»™ nÃ y, cÃ¡c phÃ­m báº¡n gÃµ sáº½ Ä‘Æ°á»£c chÃ¨n trá»±c tiáº¿p vÃ o vÄƒn báº£n.
CÃ¡c phÃ­m táº¯t cÆ¡ báº£n
Chuyá»ƒn Ä‘á»•i giá»¯a cÃ¡c cháº¿ Ä‘á»™:
	Esc: Chuyá»ƒn tá»« cháº¿ Ä‘á»™ chÃ¨n vá» cháº¿ Ä‘á»™ lá»‡nh.
Di chuyá»ƒn con trá»:
	h: Di chuyá»ƒn sang trÃ¡i má»™t kÃ½ tá»±.
	j: Di chuyá»ƒn xuá»‘ng má»™t dÃ²ng.
	k: Di chuyá»ƒn lÃªn má»™t dÃ²ng.
	l: Di chuyá»ƒn sang pháº£i má»™t kÃ½ tá»±.
	w: Di chuyá»ƒn Ä‘áº¿n Ä‘áº§u tá»« tiáº¿p theo.
	b: Di chuyá»ƒn Ä‘áº¿n Ä‘áº§u tá»« trÆ°á»›c Ä‘Ã³.
	0: Di chuyá»ƒn Ä‘áº¿n Ä‘áº§u dÃ²ng.
	$: Di chuyá»ƒn Ä‘áº¿n cuá»‘i dÃ²ng.
Chá»‰nh sá»­a vÄƒn báº£n:
	i: ChÃ¨n kÃ½ tá»± trÆ°á»›c vá»‹ trÃ­ con trá» (insert).
	a: ChÃ¨n kÃ½ tá»± sau vá»‹ trÃ­ con trá» (append).
	o: Má»Ÿ má»™t dÃ²ng má»›i á»Ÿ dÆ°á»›i dÃ²ng hiá»‡n táº¡i.
	O: Má»Ÿ má»™t dÃ²ng má»›i á»Ÿ trÃªn dÃ²ng hiá»‡n táº¡i.
	x: XÃ³a kÃ½ tá»± dÆ°á»›i con trá».
	dw: XÃ³a tá»« dÆ°á»›i con trá».
	dd: XÃ³a dÃ²ng hiá»‡n táº¡i.
	yy: Sao chÃ©p dÃ²ng hiá»‡n táº¡i.
	p: DÃ¡n dÃ²ng Ä‘Ã£ sao chÃ©p.
LÆ°u vÃ  thoÃ¡t:
	:wq: LÆ°u thay Ä‘á»•i vÃ  thoÃ¡t.
	:q!: ThoÃ¡t mÃ  khÃ´ng lÆ°u.
TÃ¬m kiáº¿m:
	/pattern: TÃ¬m kiáº¿m tá»« Ä‘áº§u Ä‘áº¿n cuá»‘i tá»‡p.
	?pattern: TÃ¬m kiáº¿m tá»« cuá»‘i lÃªn Ä‘áº§u tá»‡p.
VÃ­ dá»¥
	Äá»ƒ chÃ¨n má»™t dÃ²ng má»›i á»Ÿ trÃªn dÃ²ng hiá»‡n táº¡i, nháº¥n O.
	Äá»ƒ xÃ³a tá»« dÆ°á»›i con trá», nháº¥n dw.
	Äá»ƒ lÆ°u vÃ  thoÃ¡t, nháº¥n :wq.
Má»™t sá»‘ phÃ­m táº¯t nÃ¢ng cao
	u: HoÃ n tÃ¡c (undo).
	ctrl+r: Láº¡i lÃ m (redo).
	. (cháº¥m): Láº·p láº¡i lá»‡nh trÆ°á»›c Ä‘Ã³.
	v: Cháº¿ Ä‘á»™ visual Ä‘á»ƒ chá»n khá»‘i vÄƒn báº£n.

It's a useful vi operation to know. I'll explain it at the next Meet. â˜… is especially useful
â†“ j
â†‘ k
:100 Jump to line 100 â˜…
:0 First
G Last line

/Request complete Search â˜…
n Search next
? Search previous
o Insert (previous line)
O Insert (next line)
A Insert at end of line
I Insert at beginning of line
yy â‡’ p Copy and paste line
dd â‡’ p Delete and paste line
cw Replace
. Repeat execution
u Edit Return
:%s/aaaa/bbbb/g Replace all
:%g/aaaa/d Delete all lines with aaaa

1.	Chá»n cÃ¡c dÃ²ng cáº§n copy: 
	DÃ¹ng sá»‘ Ä‘á»ƒ chá»n: 
	Äá»ƒ chá»n 5 dÃ²ng báº¯t Ä‘áº§u tá»« dÃ²ng hiá»‡n táº¡i, báº¡n gÃµ: 5yy (y lÃ  lá»‡nh yank - tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i copy).
	Äá»ƒ chá»n tá»« dÃ²ng hiá»‡n táº¡i Ä‘áº¿n cuá»‘i file, báº¡n gÃµ: :.,$y
	DÃ¹ng dáº¥u . Ä‘á»ƒ láº·p láº¡i lá»‡nh: 
	Náº¿u vá»«a copy 5 dÃ²ng, muá»‘n copy thÃªm 5 dÃ²ng ná»¯a, chá»‰ cáº§n gÃµ ..
2.	DÃ¡n cÃ¡c dÃ²ng Ä‘Ã£ copy: 
	Äá»ƒ dÃ¡n cÃ¡c dÃ²ng Ä‘Ã£ copy vÃ o dÃ²ng tiáº¿p theo, gÃµ: p
	Äá»ƒ dÃ¡n cÃ¡c dÃ²ng Ä‘Ã£ copy trÆ°á»›c dÃ²ng hiá»‡n táº¡i, gá»›: P
VÃ­ dá»¥:
â€¢	Copy 3 dÃ²ng báº¯t Ä‘áº§u tá»« dÃ²ng hiá»‡n táº¡i vÃ  dÃ¡n vÃ o cuá»‘i file:
	3yy
	G p
	3yy: Copy 3 dÃ²ng.
	G: Di chuyá»ƒn con trá» Ä‘áº¿n cuá»‘i file.
	p: DÃ¡n cÃ¡c dÃ²ng Ä‘Ã£ copy.
â€¢	Copy tá»« dÃ²ng hiá»‡n táº¡i Ä‘áº¿n cuá»‘i file vÃ  dÃ¡n vÃ o Ä‘áº§u file:
	:.,$y
	gg p
	:.,$y: Copy tá»« dÃ²ng hiá»‡n táº¡i Ä‘áº¿n cuá»‘i file.
	gg: Di chuyá»ƒn con trá» Ä‘áº¿n Ä‘áº§u file.
	p: DÃ¡n cÃ¡c dÃ²ng Ä‘Ã£ copy.
Má»™t sá»‘ lá»‡nh khÃ¡c liÃªn quan:
â€¢	XÃ³a nhiá»u dÃ²ng: 
	dd: XÃ³a dÃ²ng hiá»‡n táº¡i.
	3dd: XÃ³a 3 dÃ²ng báº¯t Ä‘áº§u tá»« dÃ²ng hiá»‡n táº¡i.
â€¢	Di chuyá»ƒn nhiá»u dÃ²ng: 
	yy (copy) vÃ  p (paste) káº¿t há»£p Ä‘á»ƒ di chuyá»ƒn cÃ¡c dÃ²ng.
â€¢	TÃ¬m kiáº¿m vÃ  thay tháº¿: 
	/tÃ¬m_kiáº¿m: TÃ¬m kiáº¿m tá»« khÃ³a.
	:s/tÃ¬m/thay_tháº¿/g: Thay tháº¿ táº¥t cáº£ cÃ¡c tá»« tÃ¬m tháº¥y trong file.

https://tel4vn.edu.vn/top-30-cau-lenh-thuong-su-dung-trong-devops/

- Äo cpu: sar -u 60 60

- kiá»ƒm tra cÃ¡c gÃ³i Ä‘Ã£ cÃ i Ä‘áº·t:   apt list --installed
  dnf list installed

- ssh báº±ng mobaxterm:

sudo apt update
sudo apt install openssh-server
sudo yum install openssh-server
sudo systemctl start ssh
sudo service sshd start

sudo systemctl status ssh (to check status)
sudo systemctl start ssh (to start)
sudo systemctl enable ssh (to enable on boot)
Linux (ufw): sudo ufw allow 22
Linux (firewalld): sudo firewall-cmd --permanent --add-port=22/tcp && sudo firewall-cmd --reload

âœ… BÆ°á»›c 1: Kiá»ƒm tra swap hiá»‡n táº¡i

swapon --show
free -h
Náº¿u khÃ´ng tháº¥y gÃ¬ á»Ÿ swapon --show â†’ chÆ°a cÃ³ swap.

ğŸ§± BÆ°á»›c 2: Táº¡o file swap (vÃ­ dá»¥: 2GB)

sudo fallocate -l 2G /swapfile
Náº¿u fallocate khÃ´ng há»— trá»£:

sudo dd if=/dev/zero of=/swapfile bs=1M count=2048

ğŸ”’ BÆ°á»›c 3: Cáº¥p quyá»n Ä‘Ãºng cho file

sudo chmod 600 /swapfile
âš™ï¸ BÆ°á»›c 4: Biáº¿n file thÃ nh swap

sudo mkswap /swapfile
ğŸš€ BÆ°á»›c 5: KÃ­ch hoáº¡t swap

sudo swapon /swapfile
Kiá»ƒm tra láº¡i:

swapon --show
ğŸ” BÆ°á»›c 6: KÃ­ch hoáº¡t vÄ©nh viá»…n (sau reboot)
ThÃªm dÃ²ng sau vÃ o cuá»‘i file /etc/fstab:

/swapfile none swap sw 0 0
sudo nano /etc/fstab

ğŸ›ï¸ BÆ°á»›c 7: (Tuá»³ chá»n) Tinh chá»‰nh há»‡ thá»‘ng swap
Giáº£m Ä‘á»™ Æ°u tiÃªn dÃ¹ng swap náº¿u báº¡n muá»‘n dÃ¹ng RAM tá»‘i Ä‘a trÆ°á»›c:

sudo sysctl vm.swappiness=10
Máº·c Ä‘á»‹nh lÃ  60. DÃ¹ng 10 Ä‘á»ƒ háº¡n cháº¿ swap chá»‰ khi RAM thá»±c sá»± thiáº¿u.

Äá»ƒ Ä‘áº·t vÄ©nh viá»…n:

echo 'vm.swappiness=10' | sudo tee -a /etc/sysctl.conf

# sá»­a gateway:
nmcli con mod ens160 ipv4.gateway 192.168.102.2
nmcli con mod ens160 ipv4.method auto
nmcli con up ens160

#thÃ´ng tin cáº¥u hÃ¬nh máº¡ng
nmcli con show

#kiá»ƒm tra cáº¥u hÃ¬nh Ä‘á»‹nh tuyáº¿n
ip route

#thÃªm default route
sudo ip route add default via <gateway_IP>

#Kiá»ƒm tra firewalld, iptables
sudo systemctl status firewalld
sudo iptables -L -n

#restart máº¡ng
sudo nmcli networking off
sudo nmcli networking on

#cáº¥u hÃ¬nh ip 
# GÃ¡n IP tÄ©nh
sudo ip addr add 192.168.1.100/24 dev ens33

# GÃ¡n default gateway
sudo ip route add default via 192.168.1.1

# GÃ¡n DNS táº¡m thá»i
echo "nameserver 8.8.8.8" | sudo tee /etc/resolv.conf

# Äáº·t IP tÄ©nh, gateway, DNS
sudo nmcli con mod ens33 ipv4.addresses 192.168.1.100/24
sudo nmcli con mod ens33 ipv4.gateway 192.168.1.1
sudo nmcli con mod ens33 ipv4.dns "8.8.8.8 1.1.1.1"
sudo nmcli con mod ens33 ipv4.method manual

# Ãp dá»¥ng thay Ä‘á»•i
sudo nmcli con up ens33

# Má»Ÿ rá»™ng phÃ¢n vÃ¹ng logic (LVM)
CÃ¡c bÆ°á»›c má»Ÿ rá»™ng phÃ¢n vÃ¹ng LVM:

Kiá»ƒm tra nhÃ³m vÃ  phÃ¢n vÃ¹ng logic: Äáº§u tiÃªn, kiá»ƒm tra kÃ­ch thÆ°á»›c cá»§a nhÃ³m vÃ  phÃ¢n vÃ¹ng logic.
sudo vgdisplay
sudo lvdisplay

Má»Ÿ rá»™ng phÃ¢n vÃ¹ng logic: Náº¿u nhÃ³m volume (ubuntu-vg) cÃ²n dung lÆ°á»£ng trá»‘ng, báº¡n cÃ³ thá»ƒ má»Ÿ rá»™ng phÃ¢n vÃ¹ng logic ubuntu-lv Ä‘á»ƒ sá»­ dá»¥ng thÃªm dung lÆ°á»£ng tá»« sda3. VÃ­ dá»¥:
sudo lvextend -l +100%FREE /dev/ubuntu-vg/ubuntu-lv

Má»Ÿ rá»™ng há»‡ thá»‘ng tá»‡p: Sau khi má»Ÿ rá»™ng phÃ¢n vÃ¹ng, báº¡n cáº§n pháº£i thay Ä‘á»•i kÃ­ch thÆ°á»›c há»‡ thá»‘ng tá»‡p Ä‘á»ƒ nháº­n diá»‡n dung lÆ°á»£ng má»›i:
sudo resize2fs /dev/ubuntu-vg/ubuntu-lv


- UBUNTU: 
âœ… 1. Dá»ŒN /var: cache, logs, apt, docker
# XoÃ¡ cache apt
sudo apt clean
sudo apt autoclean

# XoÃ¡ log cÅ©
sudo journalctl --vacuum-time=7d
sudo rm -rf /var/log/*.gz /var/log/*.[0-9] /var/log/**/*.gz /var/log/**/*.[0-9]

# XoÃ¡ cache cá»§a systemd
sudo du -sh /var/lib/systemd/coredump
sudo rm -rf /var/lib/systemd/coredump/*

# XoÃ¡ Docker data (náº¿u khÃ´ng dÃ¹ng ná»¯a)
sudo docker system prune -a
âœ… 2. Dá»ŒN /usr: gá»¡ pháº§n má»m khÃ´ng cáº§n thiáº¿t

# Xem app náº·ng nháº¥t
dpkg-query -Wf '${Installed-Size}\t${Package}\n' | sort -n | tail -n 20 | less

# Gá»¡ má»™t sá»‘ app náº¿u khÃ´ng cáº§n (vÃ­ dá»¥ LibreOffice, Firefox)
sudo apt remove --purge libreoffice* firefox thunderbird

# Gá»¡ sáº¡ch má»i thá»© khÃ´ng cáº§n
sudo apt autoremove --purge
âœ… 3. XÃ“A swap.img (náº¿u khÃ´ng dÃ¹ng swap file)
âš ï¸ Chá»‰ lÃ m náº¿u báº¡n hiá»ƒu rÃµ swap lÃ  gÃ¬ vÃ  cháº¯c cháº¯n khÃ´ng cáº§n.

sudo swapoff /swap.img
sudo rm /swap.img
sudo sed -i '/swap.img/d' /etc/fstab
âœ… 4. Dá»ŒN /boot (nhiá»u kernel cÅ©)

# Xem kernel Ä‘ang dÃ¹ng
uname -r

# Liá»‡t kÃª cÃ¡c kernel khÃ¡c (khÃ´ng pháº£i kernel hiá»‡n táº¡i)
dpkg --list | grep linux-image

# Gá»¡ cÃ¡c kernel cÅ©
sudo apt remove --purge linux-image-5.x.x-xx-generic  # thay báº±ng tÃªn kernel cÅ©
sudo update-grub
âœ… 5. XÃ“A SNAP (náº¿u khÃ´ng dÃ¹ng Snap apps)

# XÃ³a táº¥t cáº£ Snap
snap list | awk 'NR>1 {print $1}' | xargs -n1 sudo snap remove --purge
sudo apt purge snapd
sudo rm -rf ~/snap /snap /var/snap /var/lib/snapd
âœ… 6. Dá»ŒN /tmp, /var/tmp

sudo rm -rf /tmp/*
sudo rm -rf /var/tmp/*

- ALMA LINUX
âœ… 1. XoÃ¡ cache cá»§a DNF/YUM

sudo dnf clean all
sudo rm -rf /var/cache/dnf
âœ… 2. Gá»¡ cÃ¡c package khÃ´ng cÃ²n cáº§n

sudo dnf autoremove
âœ… 3. XoÃ¡ log cÅ© vÃ  journal logs

sudo journalctl --vacuum-time=7d
sudo rm -rf /var/log/*.gz /var/log/*.[0-9] /var/log/**/*.gz /var/log/**/*.[0-9]
âœ… 4. XoÃ¡ file táº¡m vÃ  cache khÃ¡c

sudo rm -rf /tmp/*
sudo rm -rf /var/tmp/*
âœ… 5. XoÃ¡ core dumps náº¿u cÃ³

sudo rm -rf /var/lib/systemd/coredump/*
âœ… 6. XoÃ¡ Docker data (náº¿u cÃ³)

sudo docker system prune -a
âœ… 7. Gá»¡ Snap (náº¿u cÃ³)

sudo dnf remove snapd -y
sudo rm -rf ~/snap /snap /var/snap /var/lib/snapd

ğŸ§© CÃ¡ch NÃ¢ng Cáº¥p Database TrÃªn Linux
ğŸŸ¢ 1ï¸âƒ£ CÃ¡c nguyÃªn táº¯c chung trÆ°á»›c khi nÃ¢ng cáº¥p

DÃ¹ lÃ  MySQL, PostgreSQL, MariaDB, hay MongoDB â€” báº¡n luÃ´n tuÃ¢n thá»§ 5 bÆ°á»›c chuáº©n sau:

âœ… BÆ°á»›c 1: Kiá»ƒm tra phiÃªn báº£n hiá»‡n táº¡i
mysql -V
# hoáº·c
psql --version
# hoáº·c
mongo --version

âœ… BÆ°á»›c 2: Sao lÆ°u toÃ n bá»™ dá»¯ liá»‡u

KhÃ´ng bao giá» nÃ¢ng cáº¥p DB mÃ  chÆ°a cÃ³ báº£n backup!

VÃ­ dá»¥ backup MySQL:

mysqldump -u root -p --all-databases > backup_$(date +%F).sql


Backup PostgreSQL:

pg_dumpall -U postgres > backup_pg_$(date +%F).sql


Backup MongoDB:

mongodump --out /backup/mongo_$(date +%F)

âœ… BÆ°á»›c 3: Kiá»ƒm tra tÆ°Æ¡ng thÃ­ch (compatibility)

Äá»c release notes cá»§a phiÃªn báº£n má»›i.

Kiá»ƒm tra thay Ä‘á»•i vá»:

CÃº phÃ¡p SQL / lá»‡nh bá»‹ deprecated

Cáº¥u trÃºc dá»¯ liá»‡u system table

Plugin, authentication method

VÃ­ dá»¥:
MySQL 5.7 â†’ 8.0 thay Ä‘á»•i default_authentication_plugin thÃ nh caching_sha2_password.

âœ… BÆ°á»›c 4: Thá»­ nÃ¢ng cáº¥p trÃªn mÃ´i trÆ°á»ng test

Dá»±ng server clone hoáº·c container test.

Restore dá»¯ liá»‡u backup â†’ kiá»ƒm tra truy váº¥n, á»©ng dá»¥ng.

Cháº¡y cÃ¡c cÃ´ng cá»¥ kiá»ƒm tra chÃ­nh thá»©c:

mysqlcheck -u root -p --all-databases
pg_upgrade --check

âœ… BÆ°á»›c 5: NÃ¢ng cáº¥p thá»±c táº¿

TÃ¹y distro (Ubuntu / CentOS / Amazon Linux) vÃ  loáº¡i DB, lá»‡nh sáº½ khÃ¡c nhau.


ğŸ”µ 2ï¸âƒ£ NÃ¢ng cáº¥p MySQL / MariaDB
ğŸ”¹ CÃ¡ch 1: Upgrade báº±ng package manager
ğŸ§° Ubuntu/Debian:
sudo apt update
sudo apt install mysql-server


Sau khi cÃ i, cháº¡y script nÃ¢ng cáº¥p dá»¯ liá»‡u:

sudo mysql_upgrade -u root -p
sudo systemctl restart mysql

ğŸ§° CentOS / RHEL:
sudo yum update mysql-server
sudo systemctl restart mysqld

ğŸ”¹ CÃ¡ch 2: Upgrade thá»§ cÃ´ng (náº¿u major version thay Ä‘á»•i)

Stop service:

sudo systemctl stop mysqld


Backup /var/lib/mysql

Gá»¡ báº£n cÅ©:

sudo yum remove mysql-server


CÃ i báº£n má»›i (tá»« repo chÃ­nh thá»©c):

sudo rpm -Uvh https://dev.mysql.com/get/mysql80-community-release-el7-7.noarch.rpm
sudo yum install mysql-server


Khá»Ÿi Ä‘á»™ng láº¡i:

sudo systemctl start mysqld
sudo mysql_upgrade

ğŸŸ  3ï¸âƒ£ NÃ¢ng cáº¥p PostgreSQL
ğŸ”¹ Kiá»ƒm tra phiÃªn báº£n:
psql --version

ğŸ”¹ Backup vÃ  stop service:
sudo systemctl stop postgresql
pg_dumpall -U postgres > backup_pg.sql

ğŸ”¹ CÃ i báº£n má»›i song song (khÃ´ng ghi Ä‘Ã¨):
sudo apt install postgresql-15

ğŸ”¹ Sá»­ dá»¥ng cÃ´ng cá»¥ pg_upgrade:
sudo -u postgres pg_upgrade \
  -b /usr/lib/postgresql/14/bin \
  -B /usr/lib/postgresql/15/bin \
  -d /var/lib/postgresql/14/main \
  -D /var/lib/postgresql/15/main

ğŸ”¹ Cáº­p nháº­t cáº¥u hÃ¬nh & khá»Ÿi Ä‘á»™ng láº¡i:
sudo systemctl start postgresql

ğŸŸ£ 4ï¸âƒ£ NÃ¢ng cáº¥p MongoDB

Stop service:
sudo systemctl stop mongod

Backup:
mongodump --out /backup/mongo_$(date +%F)

Update repo vÃ  gÃ³i:
sudo apt update
sudo apt install -y mongodb-org

Start láº¡i:
sudo systemctl start mongod



XÃ¡c minh:
mongo --eval "db.version()"

1. Thay tháº¿ Chuá»—i ÄÆ¡n giáº£nThay tháº¿ láº§n xuáº¥t hiá»‡n Ä‘áº§u tiÃªn cá»§a tá»« "localhost" thÃ nh "production" trong tá»‡p config.txt:
sed 's/localhost/production/' config.txt

2. Thay tháº¿ ToÃ n cá»¥c trong Tá»‡p (g flag)Thay tháº¿ táº¥t cáº£ cÃ¡c láº§n xuáº¥t hiá»‡n cá»§a tá»« "Error" thÃ nh "Notice" trÃªn má»i dÃ²ng trong tá»‡p, vÃ  chá»‰nh sá»­a trá»±c tiáº¿p tá»‡p gá»‘c:
sed -i 's/Error/Notice/g' application.log

3. Chá»‰ thay tháº¿ trÃªn má»™t sá»‘ dÃ²ng cá»¥ thá»ƒ (Äá»‹nh vá»‹ DÃ²ng)Sá»­ dá»¥ng Ä‘á»‹a chá»‰ dÃ²ng (addressing) Ä‘á»ƒ giá»›i háº¡n pháº¡m vi thay tháº¿:CÃº phÃ¡pÃ nghÄ©aVÃ­ dá»¥<sá»‘_dÃ²ng>s/...Chá»‰ thay tháº¿ trÃªn dÃ²ng sá»‘ <sá»‘_dÃ²ng>.sed '5s/user/admin/g' file.txt (Chá»‰ dÃ²ng 5)/<máº«u>/s/...Chá»‰ thay tháº¿ trÃªn cÃ¡c dÃ²ng cÃ³ chá»©a <máº«u>.sed '/config/s/false/true/g' setup.conf (Chá»‰ dÃ²ng chá»©a "config")<start>,<end>s/...Chá»‰ thay tháº¿ trong pháº¡m vi tá»« dÃ²ng <start> Ä‘áº¿n <end>.sed '10,20s/old/new/g' data.csv (Tá»« dÃ²ng 10 Ä‘áº¿n 20)4. XÃ³a DÃ²ngSá»­ dá»¥ng lá»‡nh d (Delete) Ä‘á»ƒ xÃ³a dÃ²ng:XÃ³a dÃ²ng cÃ³ chá»©a má»™t máº«u:Bashsed '/^#/d' script.sh  # XÃ³a táº¥t cáº£ cÃ¡c dÃ²ng báº¯t Ä‘áº§u báº±ng dáº¥u # (comment)
XÃ³a dÃ²ng theo sá»‘ thá»© tá»±:
sed '5d' data.txt      # XÃ³a dÃ²ng thá»© 5
sed '1,3d' data.txt    # XÃ³a tá»« dÃ²ng 1 Ä‘áº¿n dÃ²ng 3

5. ThÃªm/ChÃ¨n DÃ²ngSá»­ dá»¥ng lá»‡nh i (Insert) Ä‘á»ƒ chÃ¨n trÆ°á»›c dÃ²ng Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh, hoáº·c a (Append) Ä‘á»ƒ chÃ¨n sau dÃ²ng Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh.Bash# ChÃ¨n má»™t dÃ²ng má»›i trÆ°á»›c dÃ²ng cÃ³ chá»©a tá»« "BEGIN"
sed '/BEGIN/i\--- Dá»¯ liá»‡u má»›i Ä‘Ã£ Ä‘Æ°á»£c chÃ¨n á»Ÿ Ä‘Ã¢y ---' file.txt
