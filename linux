Äiá»u kiá»‡n vá»›i cÃ¡c tá»‡p, thÆ° má»¥c:
-e kiá»ƒm tra xem tá»‡p Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh bá»Ÿi biáº¿n mÃ´i trÆ°á»ng cÃ³ tá»“n táº¡i hay khÃ´ng
-f <tÃªn> : sá»± tá»“n táº¡i cá»§a tá»‡p thÃ´ng thÆ°á»ng.
-d <tÃªn> : sá»± tá»“n táº¡i cá»§a thÆ° má»¥c.
-c <tÃªn>: sá»± tá»“n táº¡i tá»‡p dáº¡ng kÃ½ tá»±
-r <tÃªn>: sá»± tá»“n táº¡i vÃ  cÃ³ thá»ƒ Ä‘á»c Ä‘Æ°á»£c.
-s <tÃªn>: sá»± tá»“n táº¡i vÃ  cÃ³ thá»ƒ ghi Ä‘Æ°á»£c.
-w <tÃªn>: sá»± tá»“n táº¡i vÃ  cÃ³ thá»ƒ ghi Ä‘Æ°á»£c
-x <tÃªn>: sá»± tá»“n táº¡i vÃ  cÃ³ thá»ƒ cháº¡y Ä‘Æ°á»£c.

Äiá»u kiá»‡n vá»›i cÃ¡c xÃ¢u kÃ½ tá»±
-n s1: xÃ¢u s1 cÃ³ Ä‘á»™ dÃ i lá»›n hÆ¡n 0
-z ns1: xÃ¢u s1 cÃ³ Ä‘á»™ dÃ i báº±ng 0
s1 = s2: hai xÃ¢u s1 vÃ  s2 giá»‘ng nhau
s1 !=s2: hai xÃ¢u s1 vÃ  s2 khÃ´ng giá»‘ng nhau
s1 < s2: xÃ¢u s1 Ä‘á»©ng trÆ°á»›c xÃ¢u s2 theo thá»© tá»± cá»§a báº£ng mÃ£ ASCII
s1 > s2 xÃ¢u s1 Ä‘á»©ng sau xÃ¢u s2 theo thá»© tá»± cá»§a báº£ng mÃ£ ASCILL
string biáº¿n string khÃ´ng rá»—ng (not null)

Äiá»u kiá»‡n vá»›i cÃ¡c sá»‘
-a: ÄÃ¢y lÃ  toÃ¡n tá»­ logic AND, káº¿t há»£p hai Ä‘iá»u kiá»‡n kiá»ƒm tra.
-s: Äiá»u nÃ y kiá»ƒm tra xem tá»‡p REPTEXEC_WK_${START_TIME} cÃ³ trá»‘ng hay khÃ´ng.
n1 -eq n2: so sÃ¡nh báº±ng.
n1 -ge ns2: so sÃ¡nh lá»›n hÆ¡n hoáº·c báº±ng,
n1 -gt n2: so sÃ¡nh lá»›n hÆ¡n
n1 -le n2: so sÃ¡nh nhá» hÆ¡n hoáº·c báº±ng.
n1 -lt n2: so sÃ¡nh nhá» hÆ¡n
n1 -ne n2: so sÃ¡nh khÃ´ng báº±ng.

$0 : tÃªn tá»‡p Ä‘ang Ä‘Æ°á»£c thá»±c hiá»‡n
$1 : tham sá»‘ thá»© nháº¥t
$2: Tham sá»‘ thá»© hai
!	Phá»§ Ä‘á»‹nh logic	[ ! false ] Káº¿t quáº£: true
-o	PhÃ©p OR - Náº¿u má»™t trong cÃ¡c toÃ¡n háº¡ng lÃ  Ä‘Ãºng thÃ¬ biá»ƒu thá»©c Ä‘Ãºng	[ $a -lt 20 -o $b -gt 100 ] Káº¿t quáº£: true
-a	PhÃ©p AND - Náº¿u táº¥t cáº£ cÃ¡c toÃ¡n háº¡ng Ä‘Ãºng thÃ¬ biá»ƒu thá»©c Ä‘Ãºng	[ $a -lt 20 -a $b -gt 100 ] Káº¿t quáº£:false
$0 - TÃªn tá»‡p cá»§a lá»‡nh/táº­p lá»‡nh hiá»‡n táº¡i
$n - CÃ¡c biáº¿n nÃ y tÆ°Æ¡ng á»©ng vá»›i cÃ¡c Ä‘á»‘i sá»‘ truyá»n vÃ o, n lÃ  sá»‘ nguyÃªn dÆ°Æ¡ng. VÃ­ dá»¥: ./test.sh a b thÃ¬ Ä‘á»‘i sá»‘ $1, $2 láº§n lÆ°á»£t lÃ  a vÃ  b
$# - Sá»‘ lÆ°á»£ng Ä‘á»‘i sá»‘ truyá»n vÃ o. Vd: ./test.sh a b sáº½ cÃ³ 2 Ä‘á»‘i sá»‘
$? - Tráº¡ng thÃ¡i thoÃ¡t ra cá»§a lá»‡nh trÆ°á»›c Ä‘Æ°á»£c cháº¡y (thÆ°á»ng lÃ  0 Ä‘áº¡i diá»‡n cho lá»‡nh trÆ°á»›c cháº¡y thÃ nh cÃ´ng, khÃ¡c 0 lÃ  failed) Max range [0 â€“ 255]
$$ - Sá»‘ tiáº¿n trÃ¬nh cá»§a shell hiá»‡n táº¡i. Äá»‘i vá»›i Shell Script thÃ¬ Ä‘Ã¢y lÃ  sá»‘ processID mÃ  nÃ³ Ä‘ang cháº¡y
$! - Process number cá»§a lá»‡nh background cuá»‘i cÃ¹ng
$* - Chá»©a táº¥t cáº£ cÃ¡c Ä‘á»‘i sá»‘ truyá»n vÃ o. Náº¿u cÃ³ 3 Ä‘á»‘i sá»‘ truyá»n vÃ o thÃ¬ giÃ¡ trá»‹ sáº½ lÃ  $1 $2 $3 khi sá»­ dá»¥ng
$@ - Chá»©a táº¥t cáº£ cÃ¡c Ä‘á»‘i sá»‘ truyá»n vÃ o nhÆ°ng phÃ¢n tÃ¡ch thÃ nh cÃ¡c Ä‘á»‘i sá»‘ riÃªng láº» khÃ´ng nhÆ° $*
$- cá» (flag)
+ phÃ©p cá»™ng
â€“ phÃ©p trá»«
* phÃ©p nháº­n
/ phÃ©p chia
% phÃ©p láº¥y pháº§n dÆ°
== so sÃ¡nh báº±ng
!= so sÃ¡nh khÃ´ng báº±ng
< so sÃ¡nh nhá» hÆ¡n
> so sÃ¡nh lá»›n hÆ¡n
>= so sÃ¡nh lá»›n hÆ¡n hoáº·c báº±ng
<= so sÃ¡nh nhá» hÆ¡n hoáº·c báº±ng
|| hoáº·c
&& vÃ 
$USER tÃªn ngÆ°á»i sá»­ dá»¥ng hiá»‡n táº¡i
echo in ra mÃ n hÃ¬nh
read Ä‘á»c tá»« bÃ n phÃ­m
$HOME/$home thÆ° má»¥c chÃ­nh cá»§a ngÆ°á»i dÃ¹ng hiá»‡n táº¡i
$dir
$path
echo -e :tÃ¹y chá»n -e cho phÃ©p chÃ¨n cÃ¡c kÃ½ tá»±, nhÆ° \n cho dÃ²ng má»›i hoáº·c \t cho cÃ¡c tab.

Báº¡n hÃ£y thá»­ tá»± comment dÃ²ng local foo láº¡i vÃ  check xem Ä‘iá»u gÃ¬ sáº½ xáº£y ra nhÃ©.

Náº¿u nhÆ° trong script báº¡n sá»­ dá»¥ng tá»›i má»™t biáº¿n mÃ  á»Ÿ cÃ¡c lá»‡nh trÆ°á»›c chÆ°a khai bÃ¡o biáº¿n Ä‘Ã³, hoáº·c biáº¿n Ä‘Ã³ chÆ°a cÃ³ giÃ¡ trá»‹, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng má»™t vÃ i cÃº phÃ¡p sau Ä‘Æ°á»£c gá»i lÃ  variable expansion:

#{foo:-"Default value"} : náº¿u foo khÃ´ng tá»“n táº¡i hoáº·c khÃ´ng chá»©a giÃ¡ trá»‹, nÃ³ sáº½ sá»­ dá»¥ng giÃ¡ trá»‹ khai bÃ¡o sau :-.
âœ  /tmp foo= 
âœ  /tmp echo ${foo:-"Default"}
Default
âœ  /tmp echo ${foo} 

#{foo:="Default value"} : giá»‘ng nhÆ° cÃ¡ch trÃªn nhÆ°ng sau Ä‘Ã³, biáº¿n foo sáº½ Ä‘Æ°á»£c gÃ¡n cho giÃ¡ trá»‹ sau :=
âœ  /tmp echo ${foo:="Default"}
Default
âœ  /tmp echo ${foo}
Default

Má»™t sá»‘ tÃ¹y chá»n cá»§a lá»‡nh read yÃªu cáº§u má»™t tham sá»‘ bá»• sung Ä‘á»ƒ sá»­ dá»¥ng. CÃ¡c tÃ¹y chá»n Ä‘Æ°á»£c sá»­ dá»¥ng phá»• biáº¿n nháº¥t cá»§a lá»‡nh Ä‘á»c Ä‘Æ°á»£c Ä‘á» cáº­p nhÆ° sau:

TÃ¹y chá»n Má»¥c Ä‘Ã­ch
-d <dáº¥u phÃ¢n cÃ¡ch> NÃ³ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ láº¥y Ä‘áº§u vÃ o cho Ä‘áº¿n khi giÃ¡ trá»‹ dáº¥u phÃ¢n cÃ¡ch Ä‘Æ°á»£c cung cáº¥p.
-n <sá»‘> NÃ³ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ láº¥y Ä‘áº§u vÃ o cá»§a má»™t sá»‘ kÃ½ tá»± cá»¥ thá»ƒ tá»« thiáº¿t bá»‹ Ä‘áº§u cuá»‘i vÃ  dá»«ng láº¥y Ä‘áº§u vÃ o trÆ°á»›c Ä‘Ã³ dá»±a trÃªn dáº¥u phÃ¢n cÃ¡ch.
-N <sá»‘> NÃ³ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ láº¥y Ä‘áº§u vÃ o cá»§a má»™t sá»‘ kÃ½ tá»± cá»¥ thá»ƒ tá»« thiáº¿t bá»‹ Ä‘áº§u cuá»‘i, bá» qua dáº¥u phÃ¢n cÃ¡ch.
-p <prompt> NÃ³ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ in Ä‘áº§u ra cá»§a thÃ´ng bÃ¡o nháº¯c trÆ°á»›c khi láº¥y Ä‘áº§u vÃ o.
-s NÃ³ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ láº¥y Ä‘áº§u vÃ o mÃ  khÃ´ng cÃ³ tiáº¿ng vang. TÃ¹y chá»n nÃ y chá»§ yáº¿u Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ láº¥y Ä‘áº§u vÃ o cho Ä‘áº§u vÃ o máº­t kháº©u.
-a NÃ³ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ láº¥y Ä‘áº§u vÃ o cho máº£ng Ä‘Æ°á»£c láº­p chá»‰ má»¥c.
-t <time> NÃ³ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Ä‘áº·t giá»›i háº¡n thá»i gian cho viá»‡c nháº­p liá»‡u.
-u <mÃ´ táº£ tá»‡p> NÃ³ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ láº¥y Ä‘áº§u vÃ o tá»« tá»‡p.
-r NÃ³ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ vÃ´ hiá»‡u hÃ³a cÃ¡c dáº¥u gáº¡ch chÃ©o ngÆ°á»£c.

-a <array>	Assigns the provided word sequence to a variable named <array>.
-d <delimiter>	Reads a line until the provided <delimiter> instead of a new line.
-e	Starts an interactive shell session to obtain the line to read.
-i <prefix>	Adds initial text before reading a line as a prefix.
-n <number>	Returns after reading the specified number of characters while honoring the delimiter to terminate early.
-N <number>	Returns after reading the specified number of chars, ignoring the delimiter.
-p <prompt>	Outputs the prompt string before reading user input.
-r	Disable backslashes to escape characters.
-s	Does not echo the user's input.
-t <time>	The command times out after the specified time in seconds.
-u <file descriptor>	Read from file descriptor instead of standard input.

find / -type f -size +1G , find . -size +1G 
du -h * | grep -v "^\s*$" | sort -n | head -n 10
-> lá»c file lá»›n hÆ¡n 1GB


find -atime -1 -type fclear -> lá»c file truy cáº­p tá»« 1 ngÃ y trÆ°á»›c 
find . -mtime +7 -> tÃ¬m táº¥t cáº£ cÃ¡c file Ä‘Ã£ khÃ´ng truy cáº­p tá»« 1 tuáº§n trÆ°á»›c

scp remote_username@127.0.0.1:/remote/pavietnam.tar.gz /local/directory -> copy file tá»« mÃ¡y remote
scp -i d-key-PRD-0001.PEM user@server:/sourcefile /desfile -> copy
scp -i d-key-PRD-0001.PEM /sourcefile user@server:/desfile -> Ä‘áº©y

Kiá»ƒm tra Ä‘á»‹nh dáº¡ng cá»§a sda3:
df -hT

Sá»­ dá»¥ng lá»‡nh df -h Ä‘á»ƒ xÃ¡c Ä‘á»‹nh kÃ­ch thÆ°á»›c hiá»‡n táº¡i cá»§a sda3:
df -h

Sá»­ dá»¥ng lá»‡nh fdisk /dev/sda Ä‘á»ƒ má»Ÿ rá»™ng kÃ­ch thÆ°á»›c cá»§a sda:
sudo fdisk /dev/sda
Nháº¥n p Ä‘á»ƒ liá»‡t kÃª cÃ¡c phÃ¢n vÃ¹ng hiá»‡n cÃ³.
Nháº¥n d Ä‘á»ƒ xÃ³a phÃ¢n vÃ¹ng sda3.
Nháº¥n n Ä‘á»ƒ táº¡o phÃ¢n vÃ¹ng má»›i.
Nháº­p p Ä‘á»ƒ táº¡o phÃ¢n vÃ¹ng chÃ­nh.
Nháº­p kÃ­ch thÆ°á»›c phÃ¢n vÃ¹ng má»›i. 
Sá»­ dá»¥ng lá»‡nh resize2fs /dev/sda3 Ä‘á»ƒ tÄƒng kÃ­ch thÆ°á»›c cá»§a sda3:
sudo resize2fs /dev/sda3

láº¥y trÆ°á»ng thá»© 2 tá»« dá»¯ liá»‡u truyá»n vÃ o báº±ng lá»‡nh 
ls -l | awk -F ' ' '{print $5 " "}'

echo ${hostname:4:1}


stop chronyd: sudo systemctl stop chronyd
change time: sudo date -s "YYYY-MM-DD HH:MM:SS"


táº¡o má»™t tá»‡p cÃ³ tÃªn myfile vá»›i dung lÆ°á»£ng 100MB:
dd if=/dev/zero of=myfile bs=1M count=100


https://phoenixnap.com/kb/bash-read #lá»‡nh read
https://viblo.asia/p/linux-shell-va-shell-script-variables-basic-operators-Ljy5V1rolra
https://www.pluralsight.com/resources/blog/cloud/conditions-in-bash-scripting-if-statements
https://viblo.asia/p/gioi-thieu-ve-linux-shell-va-shell-script-aWj53LweK6m
https://nguyenvanhieu.vn/hoc-bash-shell-co-ban/
https://www.tutorialspoint.com/unix/unix-shell-substitutions.htm
https://cloud.z.com/vn/support/cloud/nen-va-giai-nen-file-tar-gzip-va-zip/
https://wiki.minhduy.vn/cach-set-va-liet-ke-bien-moi-truong-environment-variables-trong-linux.html
https://vpsgiare.info/tim-hieu-lap-trinh-bash-shell-script-linux/
https://tldp.org/LDP/abs/html/
https://viblo.asia/p/lam-viec-voi-file-csv-va-json-bang-giao-dien-dong-lenh-jvElaW6AKkw
https://www.gnu.org/software/bash/manual/bash.html#Here-Strings
https://blogd.net/linux/su-dung-lenh-awk/ #AWK
https://123host.vn/community/tutorial/lenh-hien-thi-tat-ca-cac-jobs-hien-tai-va-trang-thai-jobs-tren-linux-NzDWi.html #AWK

SSH Tunneling
ssh -L 4000:10.103.1.19:3389 -i AP_windows_server.pem ubuntu@18.183.252.6

check ram: while true ; do echo $(date) >> /tmp/ram_log ; free |& tee -a /tmp/ram_log; sleep 1; done;
check cpu: watch -n 1 "mpstat -P ALL |$ tee -a /tmp/ddos_log"

dos2unix

# 1. Entry: Minute when the process will be started [0-60]
# 2. Entry: Hour when the process will be started [0-23]
# 3. Entry: Day of the month when the process will be started [1-28/29/30/31]
# 4. Entry: Month of the year when the process will be started [1-12]
# 5. Entry: Weekday when the process will be started [0-6] [0 is Sunday]


CÃ¡ch Kiá»ƒm Tra CÃ¡c ThÆ° Viá»‡n (Lib) ÄÃ£ CÃ i Äáº·t Trong Linux
dpkg -l
dpkg -s <tÃªn_gÃ³i>
apt list --installed
rpm -qa

giáº£i nÃ©n file:
tar -zxvf <tÃªn_tá»‡p_tar.gz>

nÃ©n file
tar -czvf <tÃªn_file_nÃ©n.tar.gz> <cÃ¡c_file_hoáº·c_thÆ°_má»¥c>

CÃ¡ch kiá»ƒm tra sá»‘ lÆ°á»£ng phiÃªn SSH Ä‘ang káº¿t ná»‘i Ä‘áº¿n mÃ¡y Linux
Äá»ƒ kiá»ƒm tra sá»‘ lÆ°á»£ng phiÃªn SSH Ä‘ang káº¿t ná»‘i Ä‘áº¿n mÃ¡y Linux, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng má»™t sá»‘ lá»‡nh sau:

1. Lá»‡nh w:
CÃ´ng dá»¥ng: Hiá»ƒn thá»‹ thÃ´ng tin vá» cÃ¡c ngÆ°á»i dÃ¹ng Ä‘ang Ä‘Äƒng nháº­p vÃ  tiáº¿n trÃ¬nh há» Ä‘ang cháº¡y.
CÃ¡ch sá»­ dá»¥ng:

w


Káº¿t quáº£: Lá»‡nh nÃ y sáº½ hiá»ƒn thá»‹ má»™t báº£ng thÃ´ng tin, bao gá»“m tÃªn ngÆ°á»i dÃ¹ng, terminal, thá»i gian Ä‘Äƒng nháº­p, thá»i gian khÃ´ng hoáº¡t Ä‘á»™ng vÃ  lá»‡nh Ä‘ang cháº¡y. Báº¡n cÃ³ thá»ƒ Ä‘áº¿m sá»‘ dÃ²ng trong pháº§n nÃ y Ä‘á»ƒ biáº¿t sá»‘ lÆ°á»£ng phiÃªn SSH.
2. Lá»‡nh who:
CÃ´ng dá»¥ng: Hiá»ƒn thá»‹ danh sÃ¡ch cÃ¡c ngÆ°á»i dÃ¹ng Ä‘ang Ä‘Äƒng nháº­p vÃ o há»‡ thá»‘ng.
CÃ¡ch sá»­ dá»¥ng:

who


Káº¿t quáº£: Lá»‡nh nÃ y sáº½ liá»‡t kÃª tÃªn ngÆ°á»i dÃ¹ng, terminal vÃ  thá»i gian Ä‘Äƒng nháº­p.
3. Lá»‡nh ps aux | grep sshd:
CÃ´ng dá»¥ng: Liá»‡t kÃª táº¥t cáº£ cÃ¡c tiáº¿n trÃ¬nh Ä‘ang cháº¡y vÃ  lá»c ra cÃ¡c tiáº¿n trÃ¬nh liÃªn quan Ä‘áº¿n SSH.
CÃ¡ch sá»­ dá»¥ng:

ps aux | grep sshd


Káº¿t quáº£: Lá»‡nh nÃ y sáº½ hiá»ƒn thá»‹ danh sÃ¡ch cÃ¡c tiáº¿n trÃ¬nh cÃ³ chá»©a tá»« khÃ³a "sshd". Má»—i dÃ²ng Ä‘áº¡i diá»‡n cho má»™t phiÃªn SSH.
4. Lá»‡nh netstat -antp | grep :22:
CÃ´ng dá»¥ng: Hiá»ƒn thá»‹ cÃ¡c káº¿t ná»‘i máº¡ng Ä‘ang má»Ÿ, bao gá»“m cáº£ cÃ¡c káº¿t ná»‘i SSH.
CÃ¡ch sá»­ dá»¥ng:

netstat -antp | grep :22


Káº¿t quáº£: Lá»‡nh nÃ y sáº½ liá»‡t kÃª cÃ¡c káº¿t ná»‘i Ä‘ang nghe trÃªn cá»•ng 22 (cá»•ng máº·c Ä‘á»‹nh cá»§a SSH). Má»—i dÃ²ng Ä‘áº¡i diá»‡n cho má»™t káº¿t ná»‘i SSH.
Lá»±a chá»n lá»‡nh phÃ¹ há»£p:
w vÃ  who cung cáº¥p thÃ´ng tin tá»•ng quan vá» cÃ¡c ngÆ°á»i dÃ¹ng Ä‘ang Ä‘Äƒng nháº­p.
ps aux | grep sshd cung cáº¥p thÃ´ng tin chi tiáº¿t hÆ¡n vá» cÃ¡c tiáº¿n trÃ¬nh SSH.
netstat -antp | grep :22 táº­p trung vÃ o cÃ¡c káº¿t ná»‘i máº¡ng trÃªn cá»•ng SSH.
LÆ°u Ã½:

Sá»‘ lÆ°á»£ng phiÃªn: Äá»ƒ Ä‘áº¿m chÃ­nh xÃ¡c sá»‘ lÆ°á»£ng phiÃªn, báº¡n cÃ³ thá»ƒ káº¿t há»£p cÃ¡c lá»‡nh trÃªn vá»›i lá»‡nh wc -l (Ä‘áº¿m sá»‘ dÃ²ng). VÃ­ dá»¥: ps aux | grep sshd | wc -l.
CÃ¡c tÃ¹y chá»n khÃ¡c: CÃ¡c lá»‡nh trÃªn cÃ³ nhiá»u tÃ¹y chá»n khÃ¡c Ä‘á»ƒ lá»c vÃ  Ä‘á»‹nh dáº¡ng káº¿t quáº£. Tham kháº£o tÃ i liá»‡u cá»§a tá»«ng lá»‡nh Ä‘á»ƒ biáº¿t thÃªm chi tiáº¿t.
VÃ­ dá»¥:
Äá»ƒ kiá»ƒm tra sá»‘ lÆ°á»£ng phiÃªn SSH Ä‘ang káº¿t ná»‘i vÃ  hiá»ƒn thá»‹ thÃ´ng tin chi tiáº¿t vá» cÃ¡c phiÃªn Ä‘Ã³, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng lá»‡nh:


ps aux | grep sshd


Káº¿t quáº£ cÃ³ thá»ƒ giá»‘ng nhÆ° sau:

user1     2345  0.0  0.0 11244  1284 pts/0    S+   11:34   0:00 sshd: user1@pts/0
user2     3456  0.1  0.2 15360  2560 pts/1    S+   12:00   0:01 sshd: user2@pts/1
Giáº£i thÃ­ch:

user1 vÃ  user2: TÃªn ngÆ°á»i dÃ¹ng.
2345 vÃ  3456: PID cá»§a tiáº¿n trÃ¬nh.
pts/0 vÃ  pts/1: Terminal mÃ  ngÆ°á»i dÃ¹ng káº¿t ná»‘i.
11:34 vÃ  12:00: Thá»i gian báº¯t Ä‘áº§u phiÃªn.
CÃ¡c lá»‡nh khÃ¡c cÃ³ thá»ƒ há»¯u Ã­ch:

last: Hiá»ƒn thá»‹ lá»‹ch sá»­ Ä‘Äƒng nháº­p cá»§a cÃ¡c ngÆ°á»i dÃ¹ng.
whois: Hiá»ƒn thá»‹ thÃ´ng tin vá» má»™t tÃªn miá»n hoáº·c Ä‘á»‹a chá»‰ IP.
ChÃº Ã½: Viá»‡c kiá»ƒm tra vÃ  quáº£n lÃ½ cÃ¡c phiÃªn SSH lÃ  ráº¥t quan trá»ng Ä‘á»ƒ Ä‘áº£m báº£o báº£o máº­t cho há»‡ thá»‘ng cá»§a báº¡n. Báº¡n nÃªn thÆ°á»ng xuyÃªn kiá»ƒm tra vÃ  cáº¥u hÃ¬nh cÃ¡c dá»‹ch vá»¥ SSH Ä‘á»ƒ ngÄƒn cháº·n cÃ¡c cuá»™c táº¥n cÃ´ng tá»« bÃªn ngoÃ i.

â˜… tiáº¿n trÃ¬nh trong linux:
https://www.geeksforgeeks.org/pstree-command-in-linux-with-examples/ 

tÃ¬m kÃ½ tá»± abc á»Ÿ cÃ¡c file táº¡i Ä‘Æ°á»ng dáº«n /home
find /home -type f -exec grep -Hn "abc" {} \; 
grep "abc" *.*

TÃ¬m file trong mÃ¡y:
find / -name "*.ycc"
find . -name "abc"

CÃ¡c phÃ­m táº¯t cÆ¡ báº£n trong lá»‡nh vi cá»§a Linux
Hiá»ƒu vá» cÃ¡c cháº¿ Ä‘á»™ cá»§a vi
Vi hoáº¡t Ä‘á»™ng dá»±a trÃªn cÃ¡c cháº¿ Ä‘á»™ khÃ¡c nhau. Hai cháº¿ Ä‘á»™ chÃ­nh lÃ :
	Cháº¿ Ä‘á»™ lá»‡nh (command mode): ÄÃ¢y lÃ  cháº¿ Ä‘á»™ máº·c Ä‘á»‹nh khi báº¡n má»Ÿ vi. Trong cháº¿ Ä‘á»™ nÃ y, cÃ¡c phÃ­m báº¡n gÃµ sáº½ Ä‘Æ°á»£c hiá»ƒu lÃ  cÃ¡c lá»‡nh Ä‘á»ƒ Ä‘iá»u khiá»ƒn vi, chá»© khÃ´ng pháº£i Ä‘á»ƒ nháº­p vÄƒn báº£n.
	Cháº¿ Ä‘á»™ chÃ¨n (insert mode): Trong cháº¿ Ä‘á»™ nÃ y, cÃ¡c phÃ­m báº¡n gÃµ sáº½ Ä‘Æ°á»£c chÃ¨n trá»±c tiáº¿p vÃ o vÄƒn báº£n.
CÃ¡c phÃ­m táº¯t cÆ¡ báº£n
Chuyá»ƒn Ä‘á»•i giá»¯a cÃ¡c cháº¿ Ä‘á»™:
	Esc: Chuyá»ƒn tá»« cháº¿ Ä‘á»™ chÃ¨n vá» cháº¿ Ä‘á»™ lá»‡nh.
Di chuyá»ƒn con trá»:
	h: Di chuyá»ƒn sang trÃ¡i má»™t kÃ½ tá»±.
	j: Di chuyá»ƒn xuá»‘ng má»™t dÃ²ng.
	k: Di chuyá»ƒn lÃªn má»™t dÃ²ng.
	l: Di chuyá»ƒn sang pháº£i má»™t kÃ½ tá»±.
	w: Di chuyá»ƒn Ä‘áº¿n Ä‘áº§u tá»« tiáº¿p theo.
	b: Di chuyá»ƒn Ä‘áº¿n Ä‘áº§u tá»« trÆ°á»›c Ä‘Ã³.
	0: Di chuyá»ƒn Ä‘áº¿n Ä‘áº§u dÃ²ng.
	$: Di chuyá»ƒn Ä‘áº¿n cuá»‘i dÃ²ng.
Chá»‰nh sá»­a vÄƒn báº£n:
	i: ChÃ¨n kÃ½ tá»± trÆ°á»›c vá»‹ trÃ­ con trá» (insert).
	a: ChÃ¨n kÃ½ tá»± sau vá»‹ trÃ­ con trá» (append).
	o: Má»Ÿ má»™t dÃ²ng má»›i á»Ÿ dÆ°á»›i dÃ²ng hiá»‡n táº¡i.
	O: Má»Ÿ má»™t dÃ²ng má»›i á»Ÿ trÃªn dÃ²ng hiá»‡n táº¡i.
	x: XÃ³a kÃ½ tá»± dÆ°á»›i con trá».
	dw: XÃ³a tá»« dÆ°á»›i con trá».
	dd: XÃ³a dÃ²ng hiá»‡n táº¡i.
	yy: Sao chÃ©p dÃ²ng hiá»‡n táº¡i.
	p: DÃ¡n dÃ²ng Ä‘Ã£ sao chÃ©p.
LÆ°u vÃ  thoÃ¡t:
	:wq: LÆ°u thay Ä‘á»•i vÃ  thoÃ¡t.
	:q!: ThoÃ¡t mÃ  khÃ´ng lÆ°u.
TÃ¬m kiáº¿m:
	/pattern: TÃ¬m kiáº¿m tá»« Ä‘áº§u Ä‘áº¿n cuá»‘i tá»‡p.
	?pattern: TÃ¬m kiáº¿m tá»« cuá»‘i lÃªn Ä‘áº§u tá»‡p.
VÃ­ dá»¥
	Äá»ƒ chÃ¨n má»™t dÃ²ng má»›i á»Ÿ trÃªn dÃ²ng hiá»‡n táº¡i, báº¡n nháº¥n O.
	Äá»ƒ xÃ³a tá»« dÆ°á»›i con trá», báº¡n nháº¥n dw.
	Äá»ƒ lÆ°u vÃ  thoÃ¡t, báº¡n nháº¥n :wq.
Má»™t sá»‘ phÃ­m táº¯t nÃ¢ng cao
	u: HoÃ n tÃ¡c (undo).
	ctrl+r: Láº¡i lÃ m (redo).
	. (cháº¥m): Láº·p láº¡i lá»‡nh trÆ°á»›c Ä‘Ã³.
	v: Cháº¿ Ä‘á»™ visual Ä‘á»ƒ chá»n khá»‘i vÄƒn báº£n.

It's a useful vi operation to know. I'll explain it at the next Meet. â˜… is especially useful
â†“ j
â†‘ k
:100 Jump to line 100 â˜…
:0 First
G Last line

/Request complete Search â˜…
n Search next
? Search previous
o Insert (previous line)
O Insert (next line)
A Insert at end of line
I Insert at beginning of line
yy â‡’ p Copy and paste line
dd â‡’ p Delete and paste line
cw Replace
. Repeat execution
u Edit Return
:%s/aaaa/bbbb/g Replace all
:%g/aaaa/d Delete all lines with aaaa

1.	Chá»n cÃ¡c dÃ²ng cáº§n copy: 
	DÃ¹ng sá»‘ Ä‘á»ƒ chá»n: 
	Äá»ƒ chá»n 5 dÃ²ng báº¯t Ä‘áº§u tá»« dÃ²ng hiá»‡n táº¡i, báº¡n gÃµ: 5yy (y lÃ  lá»‡nh yank - tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i copy).
	Äá»ƒ chá»n tá»« dÃ²ng hiá»‡n táº¡i Ä‘áº¿n cuá»‘i file, báº¡n gÃµ: :.,$y
	DÃ¹ng dáº¥u . Ä‘á»ƒ láº·p láº¡i lá»‡nh: 
	Náº¿u báº¡n vá»«a copy 5 dÃ²ng, muá»‘n copy thÃªm 5 dÃ²ng ná»¯a, chá»‰ cáº§n gÃµ ..
2.	DÃ¡n cÃ¡c dÃ²ng Ä‘Ã£ copy: 
	Äá»ƒ dÃ¡n cÃ¡c dÃ²ng Ä‘Ã£ copy vÃ o dÃ²ng tiáº¿p theo, báº¡n gÃµ: p
	Äá»ƒ dÃ¡n cÃ¡c dÃ²ng Ä‘Ã£ copy trÆ°á»›c dÃ²ng hiá»‡n táº¡i, báº¡n gá»›: P
VÃ­ dá»¥:
â€¢	Copy 3 dÃ²ng báº¯t Ä‘áº§u tá»« dÃ²ng hiá»‡n táº¡i vÃ  dÃ¡n vÃ o cuá»‘i file:
	3yy
	G p
	3yy: Copy 3 dÃ²ng.
	G: Di chuyá»ƒn con trá» Ä‘áº¿n cuá»‘i file.
	p: DÃ¡n cÃ¡c dÃ²ng Ä‘Ã£ copy.
â€¢	Copy tá»« dÃ²ng hiá»‡n táº¡i Ä‘áº¿n cuá»‘i file vÃ  dÃ¡n vÃ o Ä‘áº§u file:
	:.,$y
	gg p
	:.,$y: Copy tá»« dÃ²ng hiá»‡n táº¡i Ä‘áº¿n cuá»‘i file.
	gg: Di chuyá»ƒn con trá» Ä‘áº¿n Ä‘áº§u file.
	p: DÃ¡n cÃ¡c dÃ²ng Ä‘Ã£ copy.
Má»™t sá»‘ lá»‡nh khÃ¡c liÃªn quan:
â€¢	XÃ³a nhiá»u dÃ²ng: 
	dd: XÃ³a dÃ²ng hiá»‡n táº¡i.
	3dd: XÃ³a 3 dÃ²ng báº¯t Ä‘áº§u tá»« dÃ²ng hiá»‡n táº¡i.
â€¢	Di chuyá»ƒn nhiá»u dÃ²ng: 
	yy (copy) vÃ  p (paste) káº¿t há»£p Ä‘á»ƒ di chuyá»ƒn cÃ¡c dÃ²ng.
â€¢	TÃ¬m kiáº¿m vÃ  thay tháº¿: 
	/tÃ¬m_kiáº¿m: TÃ¬m kiáº¿m tá»« khÃ³a.
	:s/tÃ¬m/thay_tháº¿/g: Thay tháº¿ táº¥t cáº£ cÃ¡c tá»« tÃ¬m tháº¥y trong file.

https://tel4vn.edu.vn/top-30-cau-lenh-thuong-su-dung-trong-devops/

- Äo cpu: sar -u 60 60

- kiá»ƒm tra cÃ¡c gÃ³i Ä‘Ã£ cÃ i Ä‘áº·t:   apt list --installed
  dnf list installed

- ssh báº±ng mobaxterm
sudo systemctl status ssh (to check status)
sudo systemctl start ssh (to start)
sudo systemctl enable ssh (to enable on boot)
Linux (ufw): sudo ufw allow 22
Linux (firewalld): sudo firewall-cmd --permanent --add-port=22/tcp && sudo firewall-cmd --reload

âœ… BÆ°á»›c 1: Kiá»ƒm tra swap hiá»‡n táº¡i

swapon --show
free -h
Náº¿u khÃ´ng tháº¥y gÃ¬ á»Ÿ swapon --show â†’ chÆ°a cÃ³ swap.

ğŸ§± BÆ°á»›c 2: Táº¡o file swap (vÃ­ dá»¥: 2GB)

sudo fallocate -l 2G /swapfile
Náº¿u fallocate khÃ´ng há»— trá»£:

sudo dd if=/dev/zero of=/swapfile bs=1M count=2048

ğŸ”’ BÆ°á»›c 3: Cáº¥p quyá»n Ä‘Ãºng cho file

sudo chmod 600 /swapfile
âš™ï¸ BÆ°á»›c 4: Biáº¿n file thÃ nh swap

sudo mkswap /swapfile
ğŸš€ BÆ°á»›c 5: KÃ­ch hoáº¡t swap

sudo swapon /swapfile
Kiá»ƒm tra láº¡i:

swapon --show
ğŸ” BÆ°á»›c 6: KÃ­ch hoáº¡t vÄ©nh viá»…n (sau reboot)
ThÃªm dÃ²ng sau vÃ o cuá»‘i file /etc/fstab:

/swapfile none swap sw 0 0
sudo nano /etc/fstab

ğŸ›ï¸ BÆ°á»›c 7: (Tuá»³ chá»n) Tinh chá»‰nh há»‡ thá»‘ng swap
Giáº£m Ä‘á»™ Æ°u tiÃªn dÃ¹ng swap náº¿u báº¡n muá»‘n dÃ¹ng RAM tá»‘i Ä‘a trÆ°á»›c:

sudo sysctl vm.swappiness=10
Máº·c Ä‘á»‹nh lÃ  60. DÃ¹ng 10 Ä‘á»ƒ háº¡n cháº¿ swap chá»‰ khi RAM thá»±c sá»± thiáº¿u.

Äá»ƒ Ä‘áº·t vÄ©nh viá»…n:

echo 'vm.swappiness=10' | sudo tee -a /etc/sysctl.conf

# sá»­a gateway:
nmcli con mod ens160 ipv4.gateway 192.168.102.2
nmcli con mod ens160 ipv4.method auto
nmcli con up ens160

#thÃ´ng tin cáº¥u hÃ¬nh máº¡ng
nmcli con show

#kiá»ƒm tra cáº¥u hÃ¬nh Ä‘á»‹nh tuyáº¿n
ip route

#thÃªm default route
sudo ip route add default via <gateway_IP>

#Kiá»ƒm tra firewalld, iptables
sudo systemctl status firewalld
sudo iptables -L -n

#restart máº¡ng
sudo nmcli networking off
sudo nmcli networking on

#cáº¥u hÃ¬nh ip 
# GÃ¡n IP tÄ©nh
sudo ip addr add 192.168.1.100/24 dev ens33

# GÃ¡n default gateway
sudo ip route add default via 192.168.1.1

# GÃ¡n DNS táº¡m thá»i
echo "nameserver 8.8.8.8" | sudo tee /etc/resolv.conf

# Äáº·t IP tÄ©nh, gateway, DNS
sudo nmcli con mod ens33 ipv4.addresses 192.168.1.100/24
sudo nmcli con mod ens33 ipv4.gateway 192.168.1.1
sudo nmcli con mod ens33 ipv4.dns "8.8.8.8 1.1.1.1"
sudo nmcli con mod ens33 ipv4.method manual

# Ãp dá»¥ng thay Ä‘á»•i
sudo nmcli con up ens33
